{"version":3,"sources":["../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.29.0_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.29.0_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/.pnpm/next%4016.1.6_%40babel%2Bcore%407.29.0_react-dom%4019.2.3_react%4019.2.3__react%4019.2.3/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../src/contexts/role-context.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","\"use client\";\n\nimport * as React from \"react\";\nimport type { Role, AthleteMode } from \"@/data/mock\";\n\ntype RoleContextValue = {\n  role: Role;\n  athleteMode: AthleteMode | null;\n  setRole: (r: Role) => void;\n  setAthleteMode: (m: AthleteMode | null) => void;\n  isCoach: boolean;\n  canAccess: (feature: string) => boolean;\n};\n\nconst RoleContext = React.createContext<RoleContextValue | null>(null);\n\nconst COACH_ONLY_FEATURES = [\"athletes\", \"coach\"];\nconst ATHLETE_MODE_FEATURES: Record<AthleteMode, string[]> = {\n  solo_free: [\"dashboard\", \"calendar\", \"training\", \"health\", \"progress\", \"diary\", \"messages\", \"settings\"],\n  solo_pro: [\"dashboard\", \"calendar\", \"training\", \"health\", \"progress\", \"diary\", \"messages\", \"settings\"],\n  with_coach: [\"dashboard\", \"calendar\", \"training\", \"health\", \"progress\", \"diary\", \"messages\", \"settings\"],\n  with_ai_coach: [\"dashboard\", \"calendar\", \"training\", \"health\", \"progress\", \"diary\", \"messages\", \"settings\"],\n};\n\nexport function RoleProvider({ children }: { children: React.ReactNode }) {\n  const [role, setRoleState] = React.useState<Role>(\"athlete\");\n  const [athleteMode, setAthleteModeState] = React.useState<AthleteMode | null>(\"solo_free\");\n\n  const setRole = React.useCallback((r: Role) => {\n    setRoleState(r);\n    if (r === \"coach\") setAthleteModeState(null);\n    else setAthleteModeState(\"solo_free\");\n  }, []);\n\n  const setAthleteMode = React.useCallback((m: AthleteMode | null) => {\n    setAthleteModeState(m);\n  }, []);\n\n  const isCoach = role === \"coach\";\n\n  const canAccess = React.useCallback(\n    (feature: string) => {\n      if (COACH_ONLY_FEATURES.includes(feature)) return isCoach;\n      if (isCoach) return true;\n      const mode = athleteMode ?? \"solo_free\";\n      return ATHLETE_MODE_FEATURES[mode]?.includes(feature) ?? false;\n    },\n    [isCoach, athleteMode]\n  );\n\n  const value: RoleContextValue = {\n    role,\n    athleteMode,\n    setRole,\n    setAthleteMode,\n    isCoach,\n    canAccess,\n  };\n\n  return (\n    <RoleContext.Provider value={value}>{children}</RoleContext.Provider>\n  );\n}\n\nexport function useRole() {\n  const ctx = React.useContext(RoleContext);\n  if (!ctx) throw new Error(\"useRole must be used within RoleProvider\");\n  return ctx;\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"yNA0BQG,GAAOC,OAAO,CAAGC,EAAQ,CAAA,CAAA,IAAA,iCC1BjCF,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEC,eAAe,+BCFxCP,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRI,QAAQ,CAAC,YAAY,CAAEE,KAAK,0CCA9B,EAAA,EAAA,CAAA,CAAA,OAYA,IAAM,EAAc,EAAA,aAAmB,CAA0B,MAE3D,EAAsB,CAAC,WAAY,QAAQ,CAC3C,EAAuD,CAC3D,UAAW,CAAC,YAAa,WAAY,WAAY,SAAU,WAAY,QAAS,WAAY,WAAW,CACvG,SAAU,CAAC,YAAa,WAAY,WAAY,SAAU,WAAY,QAAS,WAAY,WAAW,CACtG,WAAY,CAAC,YAAa,WAAY,WAAY,SAAU,WAAY,QAAS,WAAY,WAAW,CACxG,cAAe,CAAC,YAAa,WAAY,WAAY,SAAU,WAAY,QAAS,WAAY,WAAW,AAC7G,EAEO,SAAS,EAAa,UAAE,CAAQ,CAAiC,EACtE,GAAM,CAAC,EAAM,EAAa,CAAG,EAAA,QAAc,CAAO,WAC5C,CAAC,EAAa,EAAoB,CAAG,EAAA,QAAc,CAAqB,aAExE,EAAU,EAAA,WAAiB,CAAE,AAAD,IAChC,EAAa,GACH,UAAN,EAAe,EAAoB,MAClC,EAAoB,YAC3B,EAAG,EAAE,EAEC,EAAiB,EAAA,WAAiB,CAAC,AAAC,IACxC,EAAoB,EACtB,EAAG,EAAE,EAEC,EAAmB,UAAT,EAEV,EAAY,EAAA,WAAiB,CACjC,AAAC,IACC,GAAI,EAAoB,QAAQ,CAAC,GAAU,OAAO,EAClD,GAAI,EAAS,OAAO,EACpB,IAAM,EAAO,GAAe,YAC5B,OAAO,CAAqB,CAAC,EAAK,EAAE,SAAS,KAAY,CAC3D,EACA,CAAC,EAAS,EAAY,EAYxB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAY,QAAQ,CAAA,CAAC,MAVQ,CAUD,KAT7B,cACA,UACA,iBACA,UACA,YACA,CACF,WAGuC,GAEzC,CAEO,SAAS,IACd,IAAM,EAAM,EAAA,UAAgB,CAAC,GAC7B,GAAI,CAAC,EAAK,MAAM,AAAI,MAAM,4CAC1B,OAAO,CACT","ignoreList":[0,1,2]}